(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(2),u=t(14),o=t.n(u),r=(t(20),t(15)),a=t(3),i=(t(21),t(0)),s=function(e){e.success;var n=e.message;return n?Object(i.jsx)("div",{children:n}):null},d=t(4),l=t.n(d),j="/api/persons",b=function(){return l.a.get(j).then((function(e){return e.data}))},f=function(e){return l.a.post(j,e).then((function(e){return e.data}))},h=function(e){return l.a.delete(j+"/".concat(e)).then((function(e){return console.log(e)}))},O=function(e,n){return l.a.put(j+"/".concat(e),n).then((function(e){return e.data}))};var m=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],u=n[1],o=Object(c.useState)(""),d=Object(a.a)(o,2),l=d[0],j=d[1],m=Object(c.useState)(""),x=Object(a.a)(m,2),v=x[0],p=x[1],g=Object(c.useState)(""),y=Object(a.a)(g,2),w=y[0],C=y[1],S=Object(c.useState)({message:null,success:!1}),k=Object(a.a)(S,2),E=k[0],L=k[1];Object(c.useEffect)((function(){b().then((function(e){u(e)})).catch((function(e){console.error("Unable to get numbers from DB ",e)}))}),[]);var N=function(e,n,t){L({message:e,success:n}),setTimeout((function(){L({message:null,success:!1})}),t)},U=function(e,n){n(e.target.value)},A=w?t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})):t;return Object(i.jsxs)("div",{children:[Object(i.jsx)(s,Object(r.a)({},E)),Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)("input",{value:w,onChange:function(e){return U(e,C)}}),Object(i.jsx)("h4",{children:"Add new"}),Object(i.jsxs)("div",{children:["Name ",Object(i.jsx)("input",{value:l,onChange:function(e){return U(e,j)}})]}),Object(i.jsxs)("div",{children:["Number ",Object(i.jsx)("input",{value:v,onChange:function(e){return U(e,p)}})]}),Object(i.jsx)("button",{onClick:function(){var e={name:l,number:v},n=t.find((function(e){return e.name.toLowerCase()===l.toLowerCase()}));n?window.confirm("Entry already exists, would you edit?")&&O(n.id,e).then((function(e){alert("Successfully edited the entry")})).catch((function(e){alert("Unable to edit the entry",e)})):f(e).then((function(e){N("Successfully added a new entry",!0,3e3)})).catch((function(e){alert("Unable to add new entry",e)}))},children:"Add"}),Object(i.jsx)("h4",{children:"Numbers"}),Object(i.jsx)("ul",{children:A.map((function(e){return Object(i.jsxs)("li",{id:e.id,children:["".concat(e.name," - ").concat(e.number)," ",Object(i.jsx)("button",{onClick:function(){return n=e.id,void h(n).then((function(){N("Successfully deleted an entry",!0,3e3)})).catch((function(e){N("Cannot delete non existing entry",!1,3e3)}));var n},children:"DELETE"})]})}))})]})};o.a.render(Object(i.jsx)(m,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.b9dfc470.chunk.js.map